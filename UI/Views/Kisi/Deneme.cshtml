
@{
    ViewData["Title"] = "Deneme";
}

<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <!-- fontawesome 5 -->
    <link rel="stylesheet" type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" />
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/js/all.min.js"></script>

    <!-- jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- bootstrap-table-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.18.3/bootstrap-table.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.18.3/bootstrap-table.min.js"></script>

</head>

<body>
    <table id="bs-table" class="table table-striped table-blue"
           data-show-columns="true">
    </table>
</body>

<script>
  const TABLE = document.querySelector("table")
  const TABLE_ID = TABLE.getAttribute("id")
  const table = $(`#${TABLE_ID}`)
  const UNIQUE_ID = 'id'

  function createBSTable() {

    const columns = [
      {field: "id", title: "ID"},
      {field: "title", title: "Title"},
      {
        field: "tableAction", title: "Action",
        formatter: (value, row, index, field) => {
          curID = row[UNIQUE_ID]
          return [
            `<button type="button" class="btn btn-default btn-sm" onclick="deleteItem(${curID})">`,
            `<i class="far fa-trash-alt"></i>`,
            `</button>`,

            `<button type="button" class="btn btn-default btn-sm">`,
            `<i class="far fa-thumbs-up"></i>`,
            `</button>`
          ].join('')
        }
      }
    ]

    table.bootstrapTable()
    table.bootstrapTable('refreshOptions',
      {
        columns: columns,
        url: "https://jsonplaceholder.typicode.com/photos",
        // data: dataArray,
        height: 768,
        uniqueId: "id",
        striped: true,
        pagination: true,
        sortable: true,
        pageNumber: 1,
        pageSize: 10,
        pageList: [10, 25, 50, 100],
        search: true,
        showToggle: true,
        searchHighlight: true,
      }
    )
    table.bootstrapTable('refresh')
  }

  function deleteItem(curID) {
    if (!confirm('Are you sure you want to delete this item?')) {
      return
    }

    const ids = [curID]
    table.bootstrapTable('remove', {
      field: UNIQUE_ID,
      values: ids,
    })
  }

  (
    () => {
      window.onload = () => {
        createBSTable()
      }
    }
  )()
</script>
</html>

